<!DOCTYPE html>
<html>

<head>
  <title>My HTML Page with JS</title>
</head>

<body>
  <h1>Exemple de bouton avec fonction JavaScript</h1>

  <input type="text" id="a">
  <p>+</p>
  <input type="text" id="b">

  <button onclick="maFonction()">=</button>

  <p id="reponse"></p>

  <script>
    function maFonction() {
      var a = document.getElementById("a").value;
      var b = document.getElementById("b").value;
    
      const xhr = new XMLHttpRequest();
      xhr.open("GET", "http://pact-6.r2.enst.fr/flask/somme/" + a + "/" + b);
      xhr.send();
      //xhr.responseType = "json";
      xhr.onload = () => {
        if (xhr.readyState == 4 && xhr.status == 200) {
          const data = xhr.response;
          var paragraphe = document.getElementById("reponse");
			    paragraphe.innerHTML = data;
        } else {
          console.log(`Error: ${xhr.status}`);
        }
    }
    };

  function maFonction2(){
    const url = 'http://pact-6.r2.enst.fr/flask/sommePOST';
    const data = {a: document.getElementById("a").value, 
                  b: document.getElementById("b").value};

    const xhr = new XMLHttpRequest();
    xhr.open('POST', url);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.onreadystatechange = function() {
      if (xhr.readyState === XMLHttpRequest.DONE) {
        if (xhr.status === 200) {
          var paragraphe = document.getElementById("reponse");
          const response = JSON.parse(xhr.responseText);
			    paragraphe.innerHTML = response.value;
        } else {
          console.error('Error sending POST request');
        }
      }
    };
    xhr.send(JSON.stringify(data));
  }
  </script>
</body>

</html>